{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\n'use strict';\n\nimport axios from 'axios';\n\nexport async function searchImages(query, page) {\n\n    const API_KEY = '42540057-2630f4048f1d19f54e4f29ae2';\n    \n    const url = `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`;\n\n \n        const response = await axios.get(url);\n\n\n       \n        return response.data;\n    }\n   \n","'use strict';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderImages(images, gallery) {\n  // Чи є зображення?\n  if (images.length === 0) {\n    // Якщо мвсив пустий щтримуємо повідотлення\n    iziToast.error({\n      title: '',\n      message:\n        'Sorry, there are no images matching your search query. Please, try again!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  // Створюємо розмітку\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n                 <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                     <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n                 </a>\n                 <div class=\"description\">\n                     <div class=\"about\">\n                         <p class=\"position\">Likes</p>\n                         <p class=\"quantity\">${likes}</p>\n                     </div>\n                     <div class=\"about\">\n                         <p class=\"position\">Views</p>\n                         <p class=\"quantity\">${views}</p>\n                     </div>\n                     <div class=\"about\">\n                         <p class=\"position\">Comments</p>\n                         <p class=\"quantity\">${comments}</p>\n                     </div>\n                     <div class=\"about\">\n                         <p class=\"position\">Downloads</p>\n                         <p class=\"quantity\">${downloads}</p>\n                     </div>\n                 </div>\n             </li>`;\n      }\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\nexport function clearGallery(gallery, lightbox) {\n  gallery.innerHTML = '';\n  if (lightbox) {\n    lightbox.refresh();\n  }\n}\n","'use strict';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { searchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery  } from './js/render-functions.js';\n\n\n\nconst input = document.querySelector('.input');\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst buttonLoad = document.querySelector('.button-load');\nconst loaderEnd = document.querySelector('.loader-down');\nlet lightbox;\nlet page;\nlet query;\n\nfunction handleSearch(event) {\n  event.preventDefault();\n  loader.style.display = 'block';\nquery = input.value;\n\n page = 1;\n clearGallery (gallery, lightbox);\n\n  searchImages(query, page)\n    .then(data => {\n      const images = data.hits;\n\n      renderImages(images, gallery);\n\n      loader.style.display = 'none';\n      input.value = '';\n      buttonLoad.style.display = 'block';\n\n      lightbox = new SimpleLightbox('.gallery a', {\n        captionDelay: 200,\n        captionsData: 'alt',\n    });\n   lightbox.refresh();\n    })\n    .catch(() => {\n      iziToast.error({\n        title: '',\n        message:\n          'Sorry, there was an error while fetching images. Please, try again later!',\n        position: 'center',\n      });\n \n    });\n    \n}\n\nconst img = '';\nconst options = '';\n\n\nfunction searchMoreImages(event) {\n  event.preventDefault();\n  page += 1;\n\n  buttonLoad.style.display = 'none';\n  loaderEnd.style.display = 'block';\n\n  searchImages(query, page)\n    .then(data => {\n      const images = data.hits;\n      let number_img = data.totalHits; \n      let number_pages = number_img / 15;\n      if (number_pages < page) {\n        buttonLoad.style.display = 'none';\n        loaderEnd.style.display = 'none';\n        iziToast.info({\n          title: '',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'bottomRight',\n        });\n        return;\n      }\n      renderImages(images, gallery);\n      \n      buttonLoad.style.display = 'block';\n      loaderEnd.style.display = 'none';\n      \n      const img = gallery.lastElementChild;\n      const options = img.getBoundingClientRect();\n      window.scrollBy({top: options.height*2, behavior: \"smooth\",});\n\n      lightbox = new SimpleLightbox('.gallery a', {\n        captionDelay: 200,\n        captionsData: 'alt'\n      });\n    lightbox.refresh();\n      \n    })\n    .catch(() => {\n      iziToast.error({\n        title: '',\n        message:\n          'Sorry, there was an error while fetching images. Please, try again later!',\n        position: 'topRight',\n      });\n    });\n}\n\nform.addEventListener('submit', handleSearch);\nbuttonLoad.addEventListener('click', searchMoreImages);\n\n\n"],"names":["searchImages","query","page","url","axios","renderImages","images","gallery","iziToast","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","lightbox","input","form","loader","buttonLoad","loaderEnd","handleSearch","event","data","SimpleLightbox","searchMoreImages","options"],"mappings":"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"}